<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disaster Resource Management System</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: #f0f2f5;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 { font-size: 2.2rem; margin-bottom: 10px; }
        .subtitle { font-size: 1.1rem; opacity: 0.9; }
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        @media (max-width: 900px) {
            .dashboard { grid-template-columns: 1fr; }
        }
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
            margin-bottom: 25px;
        }
        .card-title {
            font-size: 1.4rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeaea;
        }
        .form-group { margin-bottom: 15px; }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background 0.3s;
        }
        button:hover { background: #2980b9; }
        .btn-small { padding: 6px 12px; font-size: 14px; }
        .btn-danger { background: #e74c3c; }
        .btn-danger:hover { background: #c0392b; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #ddd; }
        th { background-color: #f8f9fa; font-weight: 600; }
        tr:hover { background-color: #f5f7fa; }
        .priority-high { color: #e74c3c; font-weight: 600; }
        .priority-medium { color: #f39c12; font-weight: 600; }
        .priority-low { color: #27ae60; font-weight: 600; }
        .chart-container { position: relative; height: 300px; margin-top: 20px; }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.08);
        }
        .stat-value { font-size: 2rem; font-weight: 700; color: #3498db; margin: 10px 0; }
        .stat-label { color: #7f8c8d; font-weight: 600; }
        .supply-bar {
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }
        .supply-progress { height: 100%; border-radius: 5px; }
        .supply-water { background: #3498db; }
        .supply-food { background: #e74c3c; }
        .supply-medical { background: #2ecc71; }
        .supply-shelter { background: #f39c12; }
        .empty-table { text-align: center; padding: 30px; color: #7f8c8d; font-style: italic; }
        footer { text-align: center; margin-top: 40px; padding: 20px; color: #7f8c8d; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Disaster Resource Management System</h1>
            <p class="subtitle">Coordinate resources and track supplies across affected areas</p>
        </header>

        <div class="dashboard">
            <div class="left-column">
                <!-- Affected Area Form -->
                <div class="card">
                    <h2 class="card-title">Affected Area Details</h2>
                    <div class="form-group">
                        <label for="areaName">Area Name</label>
                        <input type="text" id="areaName" placeholder="Enter area name">
                    </div>
                    <div class="form-group">
                        <label for="population">Population Size</label>
                        <input type="number" id="population" placeholder="Enter population">
                    </div>
                    <div class="form-group">
                        <label for="condition">Condition/Status</label>
                        <select id="condition">
                            <option value="critical">Critical - Immediate assistance needed</option>
                            <option value="serious">Serious - Significant assistance needed</option>
                            <option value="moderate">Moderate - Some assistance needed</option>
                            <option value="stable">Stable - Minimal assistance needed</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="accessibility">Accessibility</label>
                        <select id="accessibility">
                            <option value="difficult">Difficult to access</option>
                            <option value="moderate">Moderately accessible</option>
                            <option value="easy">Easily accessible</option>
                        </select>
                    </div>
                    <h3 style="margin: 20px 0 10px 0; color: #2c3e50;">Supplies Needed</h3>
                    <div class="form-group">
                        <label for="waterNeeded">Water (liters)</label>
                        <input type="number" id="waterNeeded" placeholder="Liters needed" value="0">
                    </div>
                    <div class="form-group">
                        <label for="foodNeeded">Food Packages</label>
                        <input type="number" id="foodNeeded" placeholder="Packages needed" value="0">
                    </div>
                    <div class="form-group">
                        <label for="medicalNeeded">Medical Kits</label>
                        <input type="number" id="medicalNeeded" placeholder="Kits needed" value="0">
                    </div>
                    <div class="form-group">
                        <label for="shelterNeeded">Shelter Units</label>
                        <input type="number" id="shelterNeeded" placeholder="Units needed" value="0">
                    </div>
                    <button onclick="addArea()">Add Affected Area</button>
                </div>

                <!-- Base Supplies Form -->
                <div class="card">
                    <h2 class="card-title">Base Supply Details</h2>
                    <div class="form-group">
                        <label for="water">Water (liters)</label>
                        <input type="number" id="water" value="5000">
                    </div>
                    <div class="form-group">
                        <label for="food">Food Packages</label>
                        <input type="number" id="food" value="3000">
                    </div>
                    <div class="form-group">
                        <label for="medical">Medical Kits</label>
                        <input type="number" id="medical" value="1000">
                    </div>
                    <div class="form-group">
                        <label for="shelter">Shelter Units</label>
                        <input type="number" id="shelter" value="500">
                    </div>
                    <button onclick="updateSupplies()">Update Base Supplies</button>
                </div>
            </div>

            <div class="right-column">
                <!-- Affected Areas Table -->
                <div class="card">
                    <h2 class="card-title">Affected Areas Overview</h2>
                    <table id="areasTable">
                        <thead>
                            <tr>
                                <th>Area Name</th>
                                <th>Population</th>
                                <th>Condition</th>
                                <th>Priority</th>
                                <th>Supplies Needed</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="6" class="empty-table">No affected areas added yet</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Supply Chart -->
                <div class="card">
                    <h2 class="card-title">Supply Distribution</h2>
                    <div class="chart-container">
                        <canvas id="supplyChart"></canvas>
                    </div>
                </div>

                <!-- Resource Allocation Stats -->
                <div class="card">
                    <h2 class="card-title">Resource Allocation</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Water Allocation</div>
                            <div class="stat-value">0%</div>
                            <div class="supply-bar">
                                <div class="supply-progress supply-water" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Food Allocation</div>
                            <div class="stat-value">0%</div>
                            <div class="supply-bar">
                                <div class="supply-progress supply-food" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Medical Allocation</div>
                            <div class="stat-value">0%</div>
                            <div class="supply-bar">
                                <div class="supply-progress supply-medical" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Shelter Allocation</div>
                            <div class="stat-value">0%</div>
                            <div class="supply-bar">
                                <div class="supply-progress supply-shelter" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Disaster Resource Management System &copy; 2025 | Emergency Response Team</p>
        </footer>
    </div>

    <script>
        // Initialize data
        const affectedAreas = [];
        const baseSupplies = { water: 5000, food: 3000, medical: 1000, shelter: 500 };
        const totalNeeds = { water: 0, food: 0, medical: 0, shelter: 0 };

        document.addEventListener('DOMContentLoaded', function() {
            renderAreasTable();
            initSupplyChart();
        });

        function addArea() {
            const name = document.getElementById('areaName').value;
            const population = parseInt(document.getElementById('population').value);
            const condition = document.getElementById('condition').value;
            const accessibility = document.getElementById('accessibility').value;
            const waterNeeded = parseInt(document.getElementById('waterNeeded').value) || 0;
            const foodNeeded = parseInt(document.getElementById('foodNeeded').value) || 0;
            const medicalNeeded = parseInt(document.getElementById('medicalNeeded').value) || 0;
            const shelterNeeded = parseInt(document.getElementById('shelterNeeded').value) || 0;

            if (!name || isNaN(population)) {
                alert('Please enter valid area details');
                return;
            }
            if (waterNeeded === 0 && foodNeeded === 0 && medicalNeeded === 0 && shelterNeeded === 0) {
                alert('Please specify at least one type of supply needed');
                return;
            }

            const suppliesNeeded = { water: waterNeeded, food: foodNeeded, medical: medicalNeeded, shelter: shelterNeeded };

            totalNeeds.water += waterNeeded;
            totalNeeds.food += foodNeeded;
            totalNeeds.medical += medicalNeeded;
            totalNeeds.shelter += shelterNeeded;

            affectedAreas.push({ name, population, condition, accessibility, suppliesNeeded });

            renderAreasTable();
            initSupplyChart();

            // Clear form
            document.getElementById('areaName').value = '';
            document.getElementById('population').value = '';
            document.getElementById('waterNeeded').value = '0';
            document.getElementById('foodNeeded').value = '0';
            document.getElementById('medicalNeeded').value = '0';
            document.getElementById('shelterNeeded').value = '0';
        }

        function removeArea(index) {
            const area = affectedAreas[index];
            totalNeeds.water -= area.suppliesNeeded.water;
            totalNeeds.food -= area.suppliesNeeded.food;
            totalNeeds.medical -= area.suppliesNeeded.medical;
            totalNeeds.shelter -= area.suppliesNeeded.shelter;
            affectedAreas.splice(index, 1);
            renderAreasTable();
            initSupplyChart();
        }

        function updateSupplies() {
            baseSupplies.water = parseInt(document.getElementById('water').value);
            baseSupplies.food = parseInt(document.getElementById('food').value);
            baseSupplies.medical = parseInt(document.getElementById('medical').value);
            baseSupplies.shelter = parseInt(document.getElementById('shelter').value);
            alert('Base supplies updated successfully!');
            initSupplyChart();
        }

        function renderAreasTable() {
            const tableBody = document.querySelector('#areasTable tbody');
            tableBody.innerHTML = '';
            if (affectedAreas.length === 0) {
                tableBody.innerHTML = `<tr><td colspan="6" class="empty-table">No affected areas added yet</td></tr>`;
                return;
            }

            affectedAreas.forEach((area, index) => {
                const row = document.createElement('tr');

                let priority = '';
                let priorityClass = '';
                if (area.condition === 'critical' || area.condition === 'serious') {
                    priority = 'High'; priorityClass = 'priority-high';
                } else if (area.condition === 'moderate') {
                    priority = 'Medium'; priorityClass = 'priority-medium';
                } else {
                    priority = 'Low'; priorityClass = 'priority-low';
                }
                if (area.accessibility === 'difficult' && priority !== 'High') {
                    priority = 'Medium'; priorityClass = 'priority-medium';
                }

                const suppliesList = [];
                if (area.suppliesNeeded.water > 0) suppliesList.push(`Water: ${area.suppliesNeeded.water}L`);
                if (area.suppliesNeeded.food > 0) suppliesList.push(`Food: ${area.suppliesNeeded.food}`);
                if (area.suppliesNeeded.medical > 0) suppliesList.push(`Medical: ${area.suppliesNeeded.medical}`);
                if (area.suppliesNeeded.shelter > 0) suppliesList.push(`Shelter: ${area.suppliesNeeded.shelter}`);
                const suppliesText = suppliesList.join(', ');

                row.innerHTML = `
                    <td>${area.name}</td>
                    <td>${area.population.toLocaleString()}</td>
                    <td>${area.condition.charAt(0).toUpperCase() + area.condition.slice(1)}</td>
                    <td class="${priorityClass}">${priority}</td>
                    <td>${suppliesText}</td>
                    <td><button class="btn-small btn-danger" onclick="removeArea(${index})">Remove</button></td>
                `;
                tableBody.appendChild(row);
            });
        }

        function initSupplyChart() {
            const ctx = document.getElementById('supplyChart').getContext('2d');
            const waterPercent = totalNeeds.water > 0 ? Math.min(100, Math.round((baseSupplies.water / totalNeeds.water) * 100)) : 0;
            const foodPercent = totalNeeds.food > 0 ? Math.min(100, Math.round((baseSupplies.food / totalNeeds.food) * 100)) : 0;
            const medicalPercent = totalNeeds.medical > 0 ? Math.min(100, Math.round((baseSupplies.medical / totalNeeds.medical) * 100)) : 0;
            const shelterPercent = totalNeeds.shelter > 0 ? Math.min(100, Math.round((baseSupplies.shelter / totalNeeds.shelter) * 100)) : 0;

            document.querySelectorAll('.stat-value')[0].textContent = `${waterPercent}%`;
            document.querySelectorAll('.supply-water')[0].style.width = `${waterPercent}%`;
            document.querySelectorAll('.stat-value')[1].textContent = `${foodPercent}%`;
            document.querySelectorAll('.supply-food')[0].style.width = `${foodPercent}%`;
            document.querySelectorAll('.stat-value')[2].textContent = `${medicalPercent}%`;
            document.querySelectorAll('.supply-medical')[0].style.width = `${medicalPercent}%`;
            document.querySelectorAll('.stat-value')[3].textContent = `${shelterPercent}%`;
            document.querySelectorAll('.supply-shelter')[0].style.width = `${shelterPercent}%`;

            if (window.supplyChartInstance) { window.supplyChartInstance.destroy(); }
            window.supplyChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Water', 'Food', 'Medical', 'Shelter'],
                    datasets: [
                        {
                            label: 'Current Supplies',
                            data: [baseSupplies.water, baseSupplies.food, baseSupplies.medical, baseSupplies.shelter],
                            backgroundColor: [
                                'rgba(52, 152, 219, 0.7)',
                                'rgba(231, 76, 60, 0.7)',
                                'rgba(46, 204, 113, 0.7)',
                                'rgba(243, 156, 18, 0.7)'
                            ],
                            borderColor: [
                                'rgb(52, 152, 219)',
                                'rgb(231, 76, 60)',
                                'rgb(46, 204, 113)',
                                'rgb(243, 156, 18)'
                            ],
                            borderWidth: 1
                        },
                        {
                            label: 'Total Needs',
                            data: [totalNeeds.water, totalNeeds.food, totalNeeds.medical, totalNeeds.shelter],
                            backgroundColor: [
                                'rgba(52, 152, 219, 0.3)',
                                'rgba(231, 76, 60, 0.3)',
                                'rgba(46, 204, 113, 0.3)',
                                'rgba(243, 156, 18, 0.3)'
                            ],
                            borderColor: [
                                'rgb(52, 152, 219)',
                                'rgb(231, 76, 60)',
                                'rgb(46, 204, 113)',
                                'rgb(243, 156, 18)'
                            ],
                            borderWidth: 1,
                            type: 'bar'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Quantity' } }
                    },
                    plugins: {
                        title: { display: true, text: 'Current Supplies vs. Total Needs', font: { size: 16 } },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw.toLocaleString()}`;
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
